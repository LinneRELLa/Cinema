"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[10],{10:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ro"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:3}},[e._v(" 放映厅 ")]),s("el-col",{attrs:{span:3}},[e._v(" 开场时间 ")]),s("el-col",{attrs:{span:3}},[e._v(" 排片号 ")])],1),s("br"),e._l(e.queryed,(function(t,r){return s("el-row",{key:t.排片号,attrs:{gutter:10}},[s("el-col",{attrs:{span:3}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.厅名,callback:function(s){e.$set(t,"厅名",s)},expression:"x.厅名"}},e._l(e.options,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("el-col",{attrs:{span:3}},[s("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:30",end:"22:30"},placeholder:"选择时间"},model:{value:t.StartTime,callback:function(s){e.$set(t,"StartTime",s)},expression:"x.StartTime"}})],1),s("el-col",{attrs:{span:3}},[s("input",{attrs:{disabled:""},domProps:{value:t.排片号}})]),s("el-col",{attrs:{span:2}},[s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(s){return e.del(t.排片号)}}})],1)],1)})),s("br"),s("div",{staticClass:"footer"},[s("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:e.addcom}}),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],2)},l=[],o={name:"Se",beforeDestroy(){clearTimeout(this.timer)},created(){void 0==this.$store.state.data.data?this.firstget().then((()=>{this.response=this.simpleclone(this.$store.state.data.data)})):this.response=this.simpleclone(this.$store.state.data.data)},data(){return{response:"Nores",query:this.$route.query,options:[{value:"一号厅",label:"一号厅"},{value:"二号厅",label:"二号厅"},{value:"三号厅",label:"三号厅"},{value:"四号厅",label:"四号厅"}]}},computed:{a(){return this.debounce(this.sub,3e3)},queryed(){return"Nores"!=this.response?this.response.filter((e=>e.片号==this.$route.query.fn)):[]},addcom(){return this.add()}},methods:{firstget(){return console.log("axios"),this.axios({method:"post",url:"/api/Films"}).then((e=>{this.$bus.$emit("sloaded",1),this.$store.dispatch("allFilms",{data:e})}))},localupdate(){console.log("模拟请求");let e=["一","二","三","四","五","六","七","八","九","十"];for(let t of this.response)t.放映厅=e.indexOf(t.厅名.slice(0,1))+1;this.$store.dispatch("update",this.simpleclone(this.response))},del(e){this.response=this.response.filter((t=>t.排片号!=e))},debounce(e,t){let s=this;return s.timer=null,function(){s.timer?(clearTimeout(s.timer),s.timer=setTimeout(e,t)):s.timer=setTimeout(e,t)}},sub(){if(0!=this.queryed.length){for(let e of this.queryed)for(let t in e)if(!e[t])return void console.log("存在空项");this.localupdate()}else console.log(`empty FILM${this.$route.query.fn}`)},add(){return function(){let e=0;for(let s of this.response)e<s.排片号&&(e=s.排片号);let t={"片号":this.$route.query.fn,"排片号":`${Number(e)+1}`,FilmNo:this.$route.query.fn,"厅名":null,StartTime:"00:00"};for(let s of this.$store.state.data.data)if(s.片号==this.$route.query.fn){let e={};Object.assign(e,s),Object.assign(e,t),t=e;break}this.response.push(t)}.bind(this)}},watch:{response:{deep:!0,handler(e,t){"Nores"!=t&&this.a()}}}},i=o,a=s(1001),n=(0,a.Z)(i,r,l,!1,null,"4fe5b9fe",null),u=n.exports}}]);