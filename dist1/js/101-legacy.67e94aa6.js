"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[101],{4101:function(t,a,e){e.r(a),e.d(a,{default:function(){return f}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"root"}},[e("transition",{attrs:{appear:"",name:"animate__animated animate__slideInLeft","leave-active-class":"animate__bounceOutRight"}},[t.loading?e("div",{staticClass:"loading"},[e("i",{staticClass:"el-icon-s-comment loadicon"})]):t._e()]),e("div",{staticClass:"total"},t._l(t.data,(function(a){return e("router-link",{key:a[0].片号,attrs:{to:{path:"/RecordDetail",query:{No:a[0].片号,Name:a[0].FilmName}}}},[e("div",{staticClass:"cont"},[e("div",{staticClass:"front"},[e("img",{staticClass:"fronts",attrs:{src:Number(a[0].片号),alt:""}})]),e("div",[t.loading?t._e():e("LineChart",{attrs:{data:a[0].总评}})],1),e("div",{staticClass:"innercont"},[e("div",{staticClass:"leftcontent"},[e("div",{staticClass:"title"},[t._v(t._s(a[0].FilmName))]),e("div",{staticClass:"redacont"},[a[0].总评?e("REDA",{attrs:{data:a[0].总评,editable:0,small:!0}}):t._e()],1)]),a[0].UID?e("div",{key:a[0].时间,staticClass:"rt"},[e("div",{staticClass:"content"},[e("div",{staticClass:"newest"},[t._v("最新评价")]),e("div",{staticClass:"touxiang"},[a[0].头像?e("el-image",{attrs:{src:a[0].头像}}):t._e()],1),e("div",{staticClass:"name"},[t._v(" "+t._s(a[0].昵称)),e("br"),e("span",{staticStyle:{color:"gray"}},[t._v(t._s(t.ti(a[0].时间)))])]),e("br"),e("br"),e("div",{staticClass:"comment"},[t._v(t._s(a[0].短评))])]),e("div",{staticClass:"redacont1"},[a[0].打分?e("REDA",{attrs:{data:a[0].打分,editable:0,tiny:!0}}):t._e()],1)]):t._e()])])])})),1)],1)},s=[],r=e(2032),i=(e(4916),e(3123),e(9653),e(2707),e(650)),o=e(9856),c={mounted:function(){},name:"Record",deactivated:function(){},created:function(){var t=this;this.Firstget().then((function(){t.data=t.SortedRecord(),t.$nextTick((function(){t.lazyload()}))}))},data:function(){return{data:[],loading:1}},methods:{lazyload:function(){var t=function(t,a){var e,n=(0,r.Z)(t);try{for(n.s();!(e=n.n()).done;){var s=e.value,i=s.target.src.split("/")[s.target.src.split("/").length-1];if(s.isIntersecting&&Number(i)){var o,c=(0,r.Z)(this.data);try{for(c.s();!(o=c.n()).done;){var l=o.value;i==l[0].片号&&(s.target.src=l[0].封面,console.log(i))}}catch(d){c.e(d)}finally{c.f()}}}}catch(d){n.e(d)}finally{n.f()}}.bind(this),a=new IntersectionObserver(t,{root:document.querySelectorAll("#root")[1],threshold:1}),e=document.querySelectorAll(".fronts");console.log(e);var n,s=(0,r.Z)(e);try{for(s.s();!(n=s.n()).done;){var i=n.value;a.observe(i)}}catch(o){s.e(o)}finally{s.f()}},SortedRecord:function(){if(this.$store.state.Record.length){var t=this.$store.state.Record.sort((function(t,a){return t.片号-a.片号})),a=[],e=0;for(var n in t)null==t[n].时间&&(t[n].时间=0),0==n?(a[e]=[],a[e].push(t[n])):(t[n].片号==t[n-1].片号||(a[e].sort((function(t,a){return 1*moment(a.时间).format("X")-1*moment(t.时间).format("X")})),e++,a[e]=[]),a[e].push(t[n]));function s(t){for(var a=0,e=t.split(","),n=e.length-1;n>=0;n--)a+=parseInt(e[n]);return a}return a[e].sort((function(t,a){return 1*moment(a.时间).format("X")-1*moment(t.时间).format("X")})),a.sort((function(t,a){return s(a[0].总评)-s(t[0].总评)})),a}return[]},Firstget:function(){var t=this;return this.axios({method:"post",url:"api/Record"}).then((function(a){t.loading=0,t.$store.dispatch("record",a.data)}))},ti:function(t){return moment(t).format("YYYY-M-D H:mm:ss")}},components:{REDA:i.Z,LineChart:o.Z},activated:function(){this.data=this.SortedRecord()}},l=c,d=e(1001),u=(0,d.Z)(l,n,s,!1,null,"59a63afd",null),f=u.exports}}]);