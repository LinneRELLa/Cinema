"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[769],{769:function(t,a,s){s.r(a),s.d(a,{default:function(){return d}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"root"}},[s("transition",{attrs:{appear:"",name:"animate__animated animate__slideInLeft","leave-active-class":"animate__bounceOutRight"}},[t.loading?s("div",{staticClass:"loading"},[s("i",{staticClass:"el-icon-s-comment loadicon"})]):t._e()]),s("div",{staticClass:"total"},t._l(t.data,(function(a){return s("router-link",{key:a[0].片号,attrs:{to:{path:"/RecordDetail",query:{No:a[0].片号,Name:a[0].FilmName}}}},[s("div",{staticClass:"cont"},[s("div",{staticClass:"front"},[s("el-image",{attrs:{src:a[0].封面,lazy:""}})],1),s("div",{staticClass:"innercont"},[s("div",{staticClass:"leftcontent"},[s("div",{staticClass:"title"},[t._v(t._s(a[0].FilmName))]),s("div",{staticClass:"redacont"},[a[0].总评?s("REDA",{attrs:{data:a[0].总评,editable:0,small:!0}}):t._e()],1)]),a[0].UID?s("div",{key:a[0].时间,staticClass:"rt"},[s("div",{staticClass:"content"},[s("div",{staticClass:"newest"},[t._v("最新评价")]),s("div",{staticClass:"touxiang"},[a[0].头像?s("el-image",{attrs:{src:a[0].头像}}):t._e()],1),s("div",{staticClass:"name"},[t._v(" "+t._s(a[0].昵称)),s("br"),s("span",{staticStyle:{color:"gray"}},[t._v(t._s(t.ti(a[0].时间)))])]),s("br"),s("br"),s("div",{staticClass:"comment"},[t._v(t._s(a[0].短评))])]),s("div",{staticClass:"redacont1"},[a[0].打分?s("REDA",{attrs:{data:a[0].打分,editable:0,tiny:!0}}):t._e()],1)]):t._e()])])])})),1)],1)},i=[],r=s(278),n={name:"Record",deactivated(){},created(){this.Firstget().then((()=>{this.data=this.SortedRecord()}))},data(){return{data:[],loading:1}},methods:{SortedRecord(){let t=[...this.$store.state.Record].sort(((t,a)=>t.片号-a.片号)),a=[],s=0;for(let i in t)null==t[i].时间&&(t[i].时间=0),0==i?(a[s]=[],a[s].push(t[i])):(t[i].片号==t[i-1].片号||(a[s].sort(((t,a)=>1*moment(a.时间).format("X")-1*moment(t.时间).format("X"))),s++,a[s]=[]),a[s].push(t[i]));function e(t){let a=0,s=t.split(",");for(var e=s.length-1;e>=0;e--)a+=parseInt(s[e]);return a}return a[s].sort(((t,a)=>1*moment(a.时间).format("X")-1*moment(t.时间).format("X"))),a.sort(((t,a)=>e(a[0].总评)-e(t[0].总评))),a},Firstget(){return this.axios({method:"post",url:"api/Record"}).then((t=>{this.loading=0,this.$store.dispatch("record",t.data)}))},ti(t){return moment(t).format("YYYY-M-D H:mm:ss")}},components:{REDA:r.Z},activated(){this.data=this.SortedRecord(),console.log(this.data)}},o=n,l=s(1),c=(0,l.Z)(o,e,i,!1,null,"4efc96a9",null),d=c.exports}}]);
//# sourceMappingURL=769.37edc330.js.map