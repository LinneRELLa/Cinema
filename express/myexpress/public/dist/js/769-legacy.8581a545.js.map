{"version":3,"file":"js/769-legacy.8581a545.js","mappings":"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","sources":["webpack://test/./src/pages/Record.vue?ba4a","webpack://test/src/pages/Record.vue","webpack://test/./src/pages/Record.vue?1f82","webpack://test/./src/pages/Record.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"root\"}},[_c('transition',{attrs:{\"appear\":\"\",\"name\":\"animate__animated animate__slideInLeft\",\"leave-active-class\":\"animate__bounceOutRight\"}},[(_vm.loading)?_c('div',{staticClass:\"loading\"},[_c('i',{staticClass:\"el-icon-s-comment loadicon\"})]):_vm._e()]),_c('div',{staticClass:\"total\"},_vm._l((_vm.data),function(x){return _c('router-link',{key:x[0].片号,attrs:{\"to\":{\npath:'/RecordDetail',\nquery:{No:x[0].片号,\n       Name:x[0].FilmName\n}\n\t\t\t}}},[_c('div',{staticClass:\"cont\"},[_c('div',{staticClass:\"front\"},[_c('el-image',{attrs:{\"src\":x[0].封面,\"lazy\":\"\"}})],1),_c('div',{staticClass:\"innercont\"},[_c('div',{staticClass:\"leftcontent\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(x[0].FilmName))]),_c('div',{staticClass:\"redacont\"},[(x[0].总评)?_c('REDA',{attrs:{\"data\":x[0].总评,\"editable\":0,\"small\":true}}):_vm._e()],1)]),(x[0].UID)?_c('div',{key:x[0].时间,staticClass:\"rt\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"newest\"},[_vm._v(\"最新评价\")]),_c('div',{staticClass:\"touxiang\"},[(x[0].头像)?_c('el-image',{attrs:{\"src\":x[0].头像}}):_vm._e()],1),_c('div',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(x[0].昵称)),_c('br'),_c('span',{staticStyle:{\"color\":\"gray\"}},[_vm._v(_vm._s(_vm.ti(x[0].时间)))])]),_c('br'),_c('br'),_c('div',{staticClass:\"comment\"},[_vm._v(_vm._s(x[0].短评))])]),_c('div',{staticClass:\"redacont1\"},[(x[0].打分)?_c('REDA',{attrs:{\"data\":x[0].打分,\"editable\":0,\"tiny\":true}}):_vm._e()],1)]):_vm._e()])])])}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t\r\n\r\n\t<div id=\"root\">\r\n\t\t\t<transition \r\nappear   \r\n name=\"animate__animated animate__slideInLeft\"\r\n\r\n    leave-active-class=\"animate__bounceOutRight\">\r\n\r\n\r\n<div class=\"loading\" v-if=\"loading\" ><i class=\"el-icon-s-comment loadicon\"/></div>\r\n</transition>\r\n<div class=\"total\">\r\n\t<router-link :to=\"{\r\npath:'/RecordDetail',\r\nquery:{No:x[0].片号,\r\n       Name:x[0].FilmName\r\n}\r\n\t\t\t}\"  v-for=\"x of data\" :key=\"x[0].片号\">\r\n\t\t<div class=\"cont\" >\r\n\t\t\r\n\t\t\r\n\t\t<div class=\"front\">\r\n\t\t<el-image :src=\"x[0].封面\" lazy/> \r\n\t\t</div>\r\n<div class=\"innercont\">\r\n\t<div class=\"leftcontent\">\r\n<div class=\"title\">{{x[0].FilmName}}</div>\r\n<div class=\"redacont\">\r\n\r\n\t\t<REDA :data=\"x[0].总评\" v-if=\"x[0].总评\" :editable=\"0\" :small=\"true\" />\r\n</div>\r\n</div>\r\n\r\n\t<div class=\"rt\" v-if=\"x[0].UID\" :key=\"x[0].时间\">\r\n\t\t<div class=\"content\">\r\n\t\t\t<div class=\"newest\">最新评价</div>\r\n\t\t\t\r\n<div class=\"touxiang\">\r\n\t\r\n<el-image :src=\"x[0].头像\" v-if=\"x[0].头像\"/>\r\n</div>\r\n<div class=\"name\">\r\n{{x[0].昵称}}<br>\r\n<span style=\"color:gray\">{{ti(x[0].时间)}}</span>\r\n</div>\r\n\r\n<br><br>\r\n\t<div class=\"comment\">{{x[0].短评}}</div>\r\n</div>\r\n\r\n\r\n\t<div class=\"redacont1\"><REDA :data=\"x[0].打分\" v-if=\"x[0].打分\" :editable=\"0\" :tiny=\"true\"/>\r\n</div>\t\r\n\t\t\t</div>\r\n\t\t\t</div>\r\n</div>\r\n\t\t\r\n</router-link>\r\n\r\n</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport REDA from '../components/REDA'\r\n\r\nexport default{\r\n\tname:'Record',\r\n\tdeactivated(){\r\n\t\t\r\n\t\r\n\r\n},\r\n\r\ncreated(){\r\n\r\n\r\nthis.Firstget().then(()=>{\r\n\r\n\r\nthis.data=this.SortedRecord()});\r\n\r\n\r\n},\r\n\r\n\tdata(){\r\n\r\nreturn {\r\ndata:[],\r\n\tloading:1}\r\n\t},\r\n\tmethods:{\r\nSortedRecord(){\r\n   let x=[...this.$store.state.Record].sort((a,b)=>{return a.片号-b.片号});\r\n\r\n   let sorted=[];\r\n   let Index=0;\r\n   for(let i in x){\r\n   \tif(x[i].时间==null){\r\nx[i].时间=0;\r\n\r\n   \t}\r\n    if(i==0){\r\n    \tsorted[Index]=[];\r\n    \tsorted[Index].push(x[i]);\r\n    \t\r\n    }\r\n    else{\r\n          if(x[i].片号==x[i-1].片号){\r\n          \tsorted[Index].push(x[i]);\r\n          }\r\n          else{\r\n sorted[Index].sort((a,b)=>{\r\n \treturn moment(b.时间).format('X')*1-moment(a.时间).format('X')*1});\r\n\r\n           \r\n          \tIndex++;\r\n          \tsorted[Index]=[];\r\n             sorted[Index].push(x[i]);\r\n\r\n          }\r\n\r\n\r\n\r\n\r\n    }\r\n    \r\n\r\n   }\r\nsorted[Index].sort((a,b)=>{\r\n \treturn moment(b.时间).format('X')*1-moment(a.时间).format('X')*1});\r\n   function sum(input) {\r\n  let  s = 0;\r\nlet arr=input.split(',')\r\n  for (var i=arr.length-1; i>=0; i--) {\r\n    s += parseInt(arr[i]);\r\n  }\r\n  return s;\r\n}\r\n\r\nsorted.sort((a,b)=>{\r\n\treturn sum(b[0].总评)-sum(a[0].总评)})\r\n\r\nreturn sorted;\r\n  },\r\n\r\nFirstget(){\r\n\t\t\treturn this.axios({\r\n\t\tmethod:'post',\r\n\t\turl:'api/Record'\r\n\t}).then((res)=>{\r\n\t\tthis.loading=0;\r\n\r\n\t\tthis.$store.dispatch('record',res.data);})\r\n\t},\r\n\tti(x){\r\nreturn moment(x).format('YYYY-M-D H:mm:ss');\r\n},\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\tcomponents:{\r\n\t\tREDA,\r\n\t},\r\nactivated(){\r\n\r\n\r\nthis.data=this.SortedRecord();\r\nconsole.log(this.data);\r\n\r\n},\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n</script>\r\n\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n\t\r\n.cont{\r\n\t\tborder-top: gray 1px dotted;\r\n\t\tpadding:10px 0;\r\n   display: flex;\r\n\theight: 282px;\r\n\twidth: 1000px;\r\n\t&:hover{\r\n\t\tbackground:rgb(14,14,14);\r\n\t}\r\n\t.front{\r\n\r\n\t\theight: 100%;\r\n\t\twidth: 200px;\r\n\t}\r\n\t.innercont{flex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n.title{\r\n\twidth: 100%;\r\n\tfont-size: 25px;\r\n\ttext-align: center;\r\n\r\n}\r\n.redacont{\r\nwidth: 300px;\r\nposition: relative;\r\n\r\ndisplay: flex;\r\nflex-direction: column;\r\njustify-content: center;\r\n}\r\n.rt{border-radius: 5px;\r\nflex: 1;\r\nheight: 100%;\r\ndisplay: flex;\r\n\tborder:gray 1px solid;\r\nwidth:400px;\r\nflex-wrap: wrap;\r\n.content{\r\n\r\ndisplay: flex;\r\nflex-wrap: wrap;\r\nwidth: 50%;\r\n.newest{width: 100%;\r\n\r\n\t}\r\n\t.touxiang{\r\n\r\n\r\nwidth: 40px;\r\nheight: 40px;\r\nborder-radius:40px;\r\noverflow: hidden;\r\n\r\n\t}\r\n\t.name{\r\n\t\tflex: 1;\r\n\t\twhite-space: nowrap;\r\n\t\tflex-wrap: wrap;\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n}\r\n.comment{\r\n\twidth: 100px;\r\n\r\n\tpadding: 10px;\r\n}\r\n\t.redacont1{\r\n\t\tflex: 1;\r\n\t\toverflow: hidden;\r\n\t\tposition:relative;\r\n\t\tleft: -50px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\t}\r\n\r\n\r\n\r\n}\r\n#root{\r\n\toverflow: auto;\r\n\tbackground: black;\r\n\tcolor:white;\r\n\r\n\r\n}\r\n.el-image{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t.total{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items:center;\r\n\t\twidth: 100%;\r\n\t\tmin-width:1080px;\r\n\t}\r\n\t.leftcontent{\r\n\t\twidth: 50%;\r\n\t}\r\n\r\n\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Record.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Record.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Record.vue?vue&type=template&id=4efc96a9&scoped=true&\"\nimport script from \"./Record.vue?vue&type=script&lang=js&\"\nexport * from \"./Record.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Record.vue?vue&type=style&index=0&id=4efc96a9&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4efc96a9\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_e","_l","x","key","path","query","No","Name","FilmName","_v","_s","staticStyle","ti","staticRenderFns","name","deactivated","created","data","loading","methods","SortedRecord","sorted","Index","s","Firstget","method","url","then","components","REDA","activated","console","component"],"sourceRoot":""}