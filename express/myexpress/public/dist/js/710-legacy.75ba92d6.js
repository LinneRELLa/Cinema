"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[710],{710:function(t,e,r){r.r(e),r.d(e,{default:function(){return f}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ro"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:3}},[t._v(" 放映厅 ")]),r("el-col",{attrs:{span:3}},[t._v(" 开场时间 ")]),r("el-col",{attrs:{span:3}},[t._v(" 排片号 ")])],1),r("br"),t._l(t.queryed,(function(e,s){return r("el-row",{key:e.排片号,attrs:{gutter:10}},[r("el-col",{attrs:{span:3}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.厅名,callback:function(r){t.$set(e,"厅名",r)},expression:"x.厅名"}},t._l(t.options,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-col",{attrs:{span:3}},[r("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:30",end:"22:30"},placeholder:"选择时间"},model:{value:e.StartTime,callback:function(r){t.$set(e,"StartTime",r)},expression:"x.StartTime"}})],1),r("el-col",{attrs:{span:3}},[r("input",{attrs:{disabled:""},domProps:{value:e.排片号}})]),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return t.del(e.排片号)}}})],1)],1)})),r("br"),r("div",{staticClass:"footer"},[r("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:t.addcom}}),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)],2)},n=[],o=r(2032),a=r(8932),i=(r(86),r(7327),r(1539),r(7042),r(9653),{name:"Se",beforeDestroy:function(){clearTimeout(this.timer)},created:function(){var t=this;void 0==this.$store.state.data.data?this.firstget().then((function(){t.response=(0,a.Z)(t.$store.state.data.data)})):this.response=(0,a.Z)(this.$store.state.data.data)},data:function(){return{response:"Nores",query:this.$route.query,options:[{value:"一号厅",label:"一号厅"},{value:"二号厅",label:"二号厅"},{value:"三号厅",label:"三号厅"},{value:"四号厅",label:"四号厅"}]}},computed:{a:function(){return this.debounce(this.sub,3e3)},queryed:function(){var t=this;return"Nores"!=this.response?this.response.filter((function(e){return e.片号==t.$route.query.fn})):[]},addcom:function(){return this.add()}},methods:{firstget:function(){var t=this;return console.log("axios"),this.axios({method:"post",url:"/api/Films"}).then((function(e){t.$bus.$emit("sloaded",1),t.$store.dispatch("allFilms",{data:e})}))},localupdate:function(){console.log("模拟请求");var t,e=["一","二","三","四","五","六","七","八","九","十"],r=(0,o.Z)(this.response);try{for(r.s();!(t=r.n()).done;){var s=t.value;s.放映厅=e.indexOf(s.厅名.slice(0,1))+1}}catch(n){r.e(n)}finally{r.f()}this.$store.dispatch("update",this.response)},del:function(t){this.response=this.response.filter((function(e){return e.排片号!=t}))},debounce:function(t,e){var r=this;return r.timer=null,function(){r.timer?(clearTimeout(r.timer),r.timer=setTimeout(t,e)):r.timer=setTimeout(t,e)}},sub:function(){if(0!=this.queryed.length){var t,e=(0,o.Z)(this.queryed);try{for(e.s();!(t=e.n()).done;){var r=t.value;for(var s in r)if(!r[s])return void console.log("存在空项")}}catch(n){e.e(n)}finally{e.f()}this.localupdate()}else console.log("empty FILM".concat(this.$route.query.fn))},add:function(){return function(){var t,e=0,r=(0,o.Z)(this.response);try{for(r.s();!(t=r.n()).done;){var s=t.value;e<s.排片号&&(e=s.排片号)}}catch(c){r.e(c)}finally{r.f()}var n,a={"片号":this.$route.query.fn,"排片号":"".concat(Number(e)+1),FilmNo:this.$route.query.fn,"厅名":null,StartTime:"00:00"},i=(0,o.Z)(this.$store.state.data.data);try{for(i.s();!(n=i.n()).done;){var l=n.value;if(l.片号==this.$route.query.fn){var u={};Object.assign(u,l),Object.assign(u,a),a=u;break}}}catch(c){i.e(c)}finally{i.f()}this.response.push(a)}.bind(this)}},watch:{response:{deep:!0,handler:function(t,e){"Nores"!=e&&this.a()}}}}),l=i,u=r(1001),c=(0,u.Z)(l,s,n,!1,null,"6c3753cf",null),f=c.exports},7327:function(t,e,r){var s=r(2109),n=r(2092).filter,o=r(1194),a=o("filter");s({target:"Array",proto:!0,forced:!a},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=710-legacy.75ba92d6.js.map